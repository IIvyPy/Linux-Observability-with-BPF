XDP是Linux网络数据路径中的一种安全，可编程，高性能，内核集成的数据包处理器，当NIC驱动程序接收到数据包时，它将执行BPF程序。这使XDP程序可以在最早的时间点做出有关接收到的数据包的决定（丢弃，修改或允许它）。

执行点并不是使XDP程序快速运行的唯一方面。以下几个方面也扮演了很重要的角色：

- 使用XDP进行数据包处理时，没有内存分配。
- XDP程序仅适用于线性，无碎片的数据包，并且具有数据包的开始和结束指针。
- 无法访问完整的数据包元数据，这就是为什么这种程序接收的输入上下文的类型为xdp_buff而不是您在第6章中遇到的sk_buff结构的原因。
- 因为它们是eBPF程序，所以XDP程序的执行时间有限，其结果是它们的使用在网络管道中具有一定的成本。

*xdp_buff结构用于将数据包上下文呈现给BPF程序，该程序使用XDP框架提供的直接数据包访问机制。将其视为sk_buff的“轻量级”版本。两者之间的区别在于sk_buff也可以保留，并允许您与数据包的元数据（原型，标记，类型）混合，这些元数据仅在网络管道的更高级别可用。 xdp_buff提早创建且不依赖于其他内核层的事实是使用XDP更快地获取和处理数据包的原因之一。另一个原因是，xdp_buff不像对使用sk_buff的程序类型那样保存对路由，流量控制hook或其他类型的数据包元数据的引用。*

在谈论XDP时，重要的是要记住它不是内核旁路机制。它旨在与其他内核组件和内部Linux安全模型集成。

在本章中，我们将探讨XDP程序的特性，各种XDP程序以及如何编译和加载它们。此后，为了提供更多背景信息，我们讨论了它的实际用例。

### XDP 程序总览

